<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Ansible Server Patching utilizing Ansible Vault | systematis.ch</title>
<meta name=keywords content="Ansible,Linux,,Networking,Edgerouter,LXC,Linux,Mullvad"><meta name=description content="This quick guide shows how to use an Ansible playbook to patch a bunch of servers. This approach still is not fully automated, as it needs user input for the execution and provision of secrets from ansible-vault.
Prerequisites Ansible installed: Make sure Ansible is installed on the machine that will run the playbook. If you are on MacOS like me, just use brew install ansible. Vault setup: Install and configure Ansible Vault for handling sensitive data."><meta name=author content="jop"><link rel=canonical href=https://www.systematis.ch/posts/homelab-patching-ansible/><link crossorigin=anonymous href=/assets/css/stylesheet.d501cf0d5a1c36b79b18760816a253f1790f77984389dd0d21670606fdd49352.css integrity="sha256-1QHPDVocNrebGHYIFqJT8XkPd5hDid0NIWcGBv3Uk1I=" rel="preload stylesheet" as=style><link rel=icon href=https://www.systematis.ch/images/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.systematis.ch/images/favicon-96x96.png><link rel=icon type=image/png sizes=32x32 href=https://www.systematis.ch/images/favicon-96x96.png><link rel=apple-touch-icon href=https://www.systematis.ch/images/apple-touch-icon.png><link rel=mask-icon href=https://www.systematis.ch/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://www.systematis.ch/posts/homelab-patching-ansible/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><div id=cookie-notice><span>We would like to use third party cookies and scripts to improve the
functionality of this website.</span>
<a id=cookie-notice-accept class="btn btn-primary btn-sm">Approve</a>
<a id=cookie-notice-deny class="btn btn-primary btn-sm">Deny</a>
<a href=/privacy class="btn btn-primary btn-sm">More info</a></div><script>function createCookie(e,t,n){var s,o="";n&&(s=new Date,s.setTime(s.getTime()+n*24*60*60*1e3),o="; expires="+s.toUTCString()),document.cookie=e+"="+t+o+"; path=/"}function readCookie(e){for(var t,s=e+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(t=o[n];t.charAt(0)==" ";)t=t.substring(1,t.length);if(t.indexOf(s)==0)return t.substring(s.length,t.length)}return null}function eraseCookie(e){createCookie(e,"",-1)}if(readCookie("cookie-notice-option")=="true"){function loadScriptAsync(e,t){if(typeof t!="function")throw new Error("Not a valid callback for async script load");var n=document.createElement("script");n.onload=t,n.src=e,document.head.appendChild(n)}loadScriptAsync("https://www.googletagmanager.com/gtag/js?id=G-NJT0GFPQPM",function(){window.dataLayer=window.dataLayer||[];function e(){dataLayer.push(arguments)}e("js",new Date),e("config","G-NJT0GFPQPM",{anonymize_ip:!0})})}else readCookie("cookie-notice-option")!="false"&&(document.getElementById("cookie-notice").style.display="block");document.getElementById("cookie-notice-accept").addEventListener("click",function(){createCookie("cookie-notice-option","true",31),document.getElementById("cookie-notice").style.display="none",location.reload()}),document.getElementById("cookie-notice-deny").addEventListener("click",function(){createCookie("cookie-notice-option","false",31),document.getElementById("cookie-notice").style.display="none",location.reload()})</script><meta property="og:title" content="Ansible Server Patching utilizing Ansible Vault"><meta property="og:description" content="This quick guide shows how to use an Ansible playbook to patch a bunch of servers. This approach still is not fully automated, as it needs user input for the execution and provision of secrets from ansible-vault.
Prerequisites Ansible installed: Make sure Ansible is installed on the machine that will run the playbook. If you are on MacOS like me, just use brew install ansible. Vault setup: Install and configure Ansible Vault for handling sensitive data."><meta property="og:type" content="article"><meta property="og:url" content="https://www.systematis.ch/posts/homelab-patching-ansible/"><meta property="og:image" content="https://www.systematis.ch/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-03-07T23:00:50+02:00"><meta property="article:modified_time" content="2025-03-07T23:00:50+02:00"><meta property="og:site_name" content="ExampleSite"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.systematis.ch/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Ansible Server Patching utilizing Ansible Vault"><meta name=twitter:description content="This quick guide shows how to use an Ansible playbook to patch a bunch of servers. This approach still is not fully automated, as it needs user input for the execution and provision of secrets from ansible-vault.
Prerequisites Ansible installed: Make sure Ansible is installed on the machine that will run the playbook. If you are on MacOS like me, just use brew install ansible. Vault setup: Install and configure Ansible Vault for handling sensitive data."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.systematis.ch/posts/"},{"@type":"ListItem","position":2,"name":"Ansible Server Patching utilizing Ansible Vault","item":"https://www.systematis.ch/posts/homelab-patching-ansible/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Ansible Server Patching utilizing Ansible Vault","name":"Ansible Server Patching utilizing Ansible Vault","description":"This quick guide shows how to use an Ansible playbook to patch a bunch of servers. This approach still is not fully automated, as it needs user input for the execution and provision of secrets from ansible-vault.\nPrerequisites Ansible installed: Make sure Ansible is installed on the machine that will run the playbook. If you are on MacOS like me, just use brew install ansible. Vault setup: Install and configure Ansible Vault for handling sensitive data.","keywords":["Ansible","Linux","","Networking","Edgerouter","LXC","Linux","Mullvad"],"articleBody":" This quick guide shows how to use an Ansible playbook to patch a bunch of servers. This approach still is not fully automated, as it needs user input for the execution and provision of secrets from ansible-vault.\nPrerequisites Ansible installed: Make sure Ansible is installed on the machine that will run the playbook. If you are on MacOS like me, just use brew install ansible. Vault setup: Install and configure Ansible Vault for handling sensitive data. Find a setup instructions here. SSH access and sudo privileges: The user running the playbook must have SSH access and sudo privileges on the target servers. Step 1: Setting up an inventory file with vaulted passwords First, we need an inventory file that defines the hosts we want to patch and includes an encrypted become password variable. Here’s a typical structure:\nCreate inventory file (inventory.yaml): Define groups or specific hosts. Specify variables to hold the vaulted password information. [vpn] ansible_host: 10.10.10.10 [vpn:vars] ansible_user=user ansible_ssh_port=22 ansible_ssh_private_key_file=~/.ssh/id_rsa ansible_become_pass='{{ vpn_become_pass }}' Note: The vaulted strings above are placeholders. You’ll need to create your own encrypted passwords in your vault. Also, this assumes your ssh key has already been copied to the to be patched server.\nStep 2: Writing the playbook for server patching The playbook file, patch_servers.yaml, will include tasks for updating packages, cleaning up, checking for a reboot, and handling SSH keys.\n--- - hosts: hostgroup become: true gather_facts: true tasks: - name: Update package cache apt: update_cache: yes force_apt_get: yes cache_valid_time: 3600 - name: Upgrade all packages apt: upgrade: dist # Step 2.3: Clean Up - name: Remove old packages and clean cache apt: autoremove: yes autoclean: yes clean: yes # Step 2.4: Reboot if Required - name: Check if reboot is required register: reboot_required_file stat: path=/var/run/reboot-required - name: Reboot if kernel updated reboot: msg: \"Reboot initiated by Ansible for kernel updates\" connect_timeout: 5 reboot_timeout: 300 pre_reboot_delay: 0 post_reboot_delay: 30 test_command: uptime when: reboot_required_file.stat.exists Step 4: Running the Playbook with Ansible Vault Run the playbook with the following command, referencing the vault password file:\nansible-playbook -i inventory.yaml patch_servers.yaml --ask-vault-pass -e@vaulted_vars.yml Explanation of Inventory File Configuration Inventory File: ansible_host: Specifies the IP or hostname of the target server. ansible_user: The SSH user to connect as. ansible_become_pass: The become (sudo) password for privilege escalation, encrypted with Ansible Vault. Conclusion That’s it already. Obviously there is more automated ways to this, like setting up a HashiCorp Vault instance and any automation server that fetches the secrets from there and patches your machines regularly. I found this approach very useful though, so I am sharing it.\n","wordCount":"427","inLanguage":"en","image":"https://www.systematis.ch/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2025-03-07T23:00:50+02:00","dateModified":"2025-03-07T23:00:50+02:00","author":{"@type":"Person","name":"jop"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.systematis.ch/posts/homelab-patching-ansible/"},"publisher":{"@type":"Organization","name":"systematis.ch","logo":{"@type":"ImageObject","url":"https://www.systematis.ch/images/favicon.ico"}}}</script><link rel=stylesheet href=https://www.systematis.ch/css/custom.min.78d78f696a67b7d352e0ff60497fd7c47e7ec615024c94a9a3abbbbc3e1ede77.css></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.systematis.ch/ accesskey=h title="systematis.ch (Alt + H)"><img src=https://www.systematis.ch/images/apple-touch-icon.png alt aria-label=logo height=35>systematis.ch</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.systematis.ch/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://www.systematis.ch/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://www.systematis.ch/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://www.systematis.ch/about/ title=About><span>About</span></a></li><li><a href=https://github.com/systematis-jop title=systematis-jop@github.com><span>systematis-jop@github.com</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Ansible Server Patching utilizing Ansible Vault</h1><div class=post-meta><span title='2025-03-07 23:00:50 +0200 +0200'>March 7, 2025</span>&nbsp;·&nbsp;427 words&nbsp;·&nbsp;jop&nbsp;|&nbsp;<a href=https://github.com/systematis-jop/website/blob/main/content/posts/homelab-patching-ansible.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p><img loading=lazy src=/images/ansible.jpg alt="Ansible Server Patching utilizing Ansible Vault"></p><p>This quick guide shows how to use an Ansible playbook to patch a bunch of servers. This approach still is not fully automated, as it needs user input for the execution and provision of secrets from ansible-vault.</p><h3 id=prerequisites>Prerequisites<a hidden class=anchor aria-hidden=true href=#prerequisites>#</a></h3><ol><li><strong>Ansible installed</strong>: Make sure Ansible is installed on the machine that will run the playbook. If you are on MacOS like me, just use <code>brew install ansible</code>.</li><li><strong>Vault setup</strong>: Install and configure Ansible Vault for handling sensitive data. Find a setup instructions <a href=https://www.systematis.ch/posts/ansible-vault-setup/>here.</a></li><li><strong>SSH access and sudo privileges</strong>: The user running the playbook must have SSH access and sudo privileges on the target servers.</li></ol><h3 id=step-1-setting-up-an-inventory-file-with-vaulted-passwords>Step 1: Setting up an inventory file with vaulted passwords<a hidden class=anchor aria-hidden=true href=#step-1-setting-up-an-inventory-file-with-vaulted-passwords>#</a></h3><p>First, we need an inventory file that defines the hosts we want to patch and includes an encrypted <code>become</code> password variable. Here&rsquo;s a typical structure:</p><ol><li><strong>Create inventory file</strong> (<code>inventory.yaml</code>):<ul><li>Define groups or specific hosts.</li><li>Specify variables to hold the vaulted password information.</li></ul></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>    </span><span class=p>[</span><span class=l>vpn]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ansible_host</span><span class=p>:</span><span class=w> </span><span class=m>10.10.10.10</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>[</span><span class=l>vpn:vars]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>ansible_user=user</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>ansible_ssh_port=22</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>ansible_ssh_private_key_file=~/.ssh/id_rsa</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>ansible_become_pass=&#39;{{ vpn_become_pass }}&#39;</span><span class=w>
</span></span></span></code></pre></div><blockquote><p><strong>Note</strong>: The vaulted strings above are placeholders. You’ll need to create your own encrypted passwords in your vault. Also, this assumes your ssh key has already been copied to the to be patched server.</p></blockquote><h3 id=step-2-writing-the-playbook-for-server-patching>Step 2: Writing the playbook for server patching<a hidden class=anchor aria-hidden=true href=#step-2-writing-the-playbook-for-server-patching>#</a></h3><p>The playbook file, <code>patch_servers.yaml</code>, will include tasks for updating packages, cleaning up, checking for a reboot, and handling SSH keys.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>hosts</span><span class=p>:</span><span class=w> </span><span class=l>hostgroup</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>become</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>gather_facts</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>tasks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Update package cache</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>apt</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>update_cache</span><span class=p>:</span><span class=w> </span><span class=kc>yes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>force_apt_get</span><span class=p>:</span><span class=w> </span><span class=kc>yes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>cache_valid_time</span><span class=p>:</span><span class=w> </span><span class=m>3600</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Upgrade all packages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>apt</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>upgrade</span><span class=p>:</span><span class=w> </span><span class=l>dist</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Step 2.3: Clean Up</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Remove old packages and clean cache</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>apt</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>autoremove</span><span class=p>:</span><span class=w> </span><span class=kc>yes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>autoclean</span><span class=p>:</span><span class=w> </span><span class=kc>yes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>clean</span><span class=p>:</span><span class=w> </span><span class=kc>yes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Step 2.4: Reboot if Required</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Check if reboot is required</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>register</span><span class=p>:</span><span class=w> </span><span class=l>reboot_required_file</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>stat</span><span class=p>:</span><span class=w> </span><span class=l>path=/var/run/reboot-required</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Reboot if kernel updated</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>reboot</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>msg</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Reboot initiated by Ansible for kernel updates&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>connect_timeout</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>reboot_timeout</span><span class=p>:</span><span class=w> </span><span class=m>300</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>pre_reboot_delay</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>post_reboot_delay</span><span class=p>:</span><span class=w> </span><span class=m>30</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>test_command</span><span class=p>:</span><span class=w> </span><span class=l>uptime</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>when</span><span class=p>:</span><span class=w> </span><span class=l>reboot_required_file.stat.exists</span><span class=w>
</span></span></span></code></pre></div><h3 id=step-4-running-the-playbook-with-ansible-vault>Step 4: Running the Playbook with Ansible Vault<a hidden class=anchor aria-hidden=true href=#step-4-running-the-playbook-with-ansible-vault>#</a></h3><p>Run the playbook with the following command, referencing the vault password file:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ansible-playbook -i inventory.yaml patch_servers.yaml --ask-vault-pass -e@vaulted_vars.yml
</span></span></code></pre></div><h3 id=explanation-of-inventory-file-configuration>Explanation of Inventory File Configuration<a hidden class=anchor aria-hidden=true href=#explanation-of-inventory-file-configuration>#</a></h3><ul><li><strong>Inventory File</strong>:<ul><li><code>ansible_host</code>: Specifies the IP or hostname of the target server.</li><li><code>ansible_user</code>: The SSH user to connect as.</li><li><code>ansible_become_pass</code>: The <code>become</code> (sudo) password for privilege escalation, encrypted with Ansible Vault.</li></ul></li></ul><h3 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h3><p>That&rsquo;s it already. Obviously there is more automated ways to this, like setting up a HashiCorp Vault instance and any automation server that fetches the secrets from there and patches your machines regularly. I found this approach very useful though, so I am sharing it.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.systematis.ch/tags/ansible/>Ansible</a></li><li><a href=https://www.systematis.ch/tags/networking/>Networking</a></li><li><a href=https://www.systematis.ch/tags/edgerouter/>Edgerouter</a></li><li><a href=https://www.systematis.ch/tags/lxc/>LXC</a></li><li><a href=https://www.systematis.ch/tags/linux/>Linux</a></li><li><a href=https://www.systematis.ch/tags/mullvad/>Mullvad</a></li></ul><nav class=paginav><a class=next href=https://www.systematis.ch/posts/erx-vpn-routing/><span class=title>Next »</span><br><span>Routing Traffic Through a VPN Container</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://www.systematis.ch/>systematis.ch</a></span> ·
<a href=/imprint/>Imprint</a> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>